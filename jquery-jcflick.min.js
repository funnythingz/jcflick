/* jquery-jcflick.js v@0.0.6 github.com/funnythingz/jcflick | mit-license */
(function(a){a.fn.jcflick=function(d){var e={flickContainer:"flickContainer",flickWrapper:"flickWrapper",flickCol:"flickCol",autoTimer:5000};var c=$.extend(e,d);return this.each(function(g){var f=$(this);b(c,f)})};var b=function(g,p){var z=(typeof(z)=="undefined"||!z)?{}:undefined;z.p={nowPage:0,wrapperWidth:0,colWidth:0,totalLength:0,touchPositionX:0,touchPositionY:0,movePosition:0,nowPosition:0,positionIntX:0,positionIntY:0,flag:false,autoChangeFlag:true,Timer:"",AndroidTimer:""};z.singleCol=function(i,f){var B=$("."+i,f);return B};z.ua={Android:navigator.userAgent.indexOf("Linux; U; Android ")!=-1,Honeycomb:navigator.userAgent.indexOf("HONEYCOMB")!=-1,GalaxyTab:navigator.userAgent.indexOf("SC-01C")!=-1,iPod:navigator.userAgent.indexOf("iPod")!=-1,iPhone:navigator.userAgent.indexOf("iPhone")!=-1,iPad:navigator.userAgent.indexOf("iPad")!=-1};var l=z.singleCol(g.flickContainer,p);var q=z.singleCol(g.flickWrapper,p);var A=z.singleCol(g.flickCol,p);q.css({width:l.width()+"px"});A.css({width:l.width()+"px"});z.p.nowPage=(typeof(g.flickCur)!="undefined")?g.flickCur:0;var u=function(f){q.css({webkitTransition:"all 0.6s",webkitTransform:"translate3d("+f+"px, 0, 0)"})};var w=function(f){q.css({webkitTransition:"all 0.6s",webkitTransform:"translate("+f+"px, 0)"})};var e=function(f){q.stop().animate({left:z.p.nowPosition+"px"},500)};var h=function(f){if(z.ua.iPhone||z.ua.iPad||z.ua.iPod){u(f)}else{if(z.ua.Android){w(f)}else{e(f)}}};z.p.wrapperWidth=(z.p.totalLength=A.length)*(z.p.colWidth=A.width());z.p.nowPosition=-(z.p.colWidth*z.p.nowPage);h(z.p.nowPosition);z.flickLamp=function(i){var f=$("<span>");f.addClass("lamp_def lamp_"+i);f.html("");return f};z.flickLampCol=[];if(typeof(g.flickLamp)!="undefined"){if(z.ua.iPad){var o=z.singleCol(g.flickLamp,p).html("").css({textAlign:"center",width:l.width()+"px"})}else{var o=z.singleCol(g.flickLamp,p).html("").css({textAlign:"center"})}for(var y=0;y<z.p.totalLength;y++){z.flickLampCol[y]=new z.flickLamp(y);if(y===z.p.nowPage){z.flickLampCol[y].addClass("lamp_cur")}o.append(z.flickLampCol[y])}}var s=false;s=(g.autoChange)?g.autoChange:false;var n=g.autoTimer;var j=function(){if(z.p.autoChangeFlag){z.p.nowPosition=z.p.movePosition;if(typeof(g.flickBtn)!="undefined"){z.flickBtnNext.removeClass("btnFalse").addClass("pointer");z.flickBtnBack.removeClass("btnFalse").addClass("pointer")}if(z.p.nowPage<z.p.totalLength){if(z.p.nowPage<(z.p.totalLength-1)){z.p.nowPage++;z.p.nowPosition=-(z.p.colWidth*z.p.nowPage);h(z.p.nowPosition);if(typeof(g.flickBtn)!="undefined"&&z.p.nowPage==(z.p.totalLength-1)){z.flickBtnNext.removeClass("pointer").addClass("btnFalse")}}else{if(z.p.nowPage===(z.p.totalLength-1)){z.p.nowPage=0;z.p.nowPosition=0;h(z.p.nowPosition);if(typeof(g.flickBtn)!="undefined"){z.flickBtnBack.removeClass("pointer").addClass("btnFalse")}}}}if(typeof(g.flickLamp)!="undefined"&&typeof(z.flickLampCol[z.p.nowPage])!="undefined"){for(var f=0;f<z.p.totalLength;f++){z.flickLampCol[f].removeClass("lamp_cur")}z.flickLampCol[z.p.nowPage].addClass("lamp_cur")}}};var r=function(){if(z.p.autoChangeFlag){q.css({width:l.width()+"px"});A.css({width:l.width()+"px"});if(typeof(g.flickBtn)!="undefined"){c.css({width:l.width()+"px"})}z.p.wrapperWidth=(z.p.totalLength=A.length)*(z.p.colWidth=A.width());q.css({width:z.p.wrapperWidth});z.p.nowPosition=-(z.p.colWidth*z.p.nowPage);h(z.p.nowPosition)}};z.flickBtn=function(i,B){var f=$("<span>");f.addClass("flick_btn_"+i);f.html(B);return f};var d=function(){z.p.autoChangeFlag=true};if(typeof(g.flickBtn)!="undefined"){var c=z.singleCol(g.flickBtn,p).html("").css({width:l.width()+"px"});var x=true;var m=(typeof(g.flickBtnNextName)!="undefined")?g.flickBtnNextName:"next";var t=(typeof(g.flickBtnBackName)!="undefined")?g.flickBtnBackName:"back";z.flickBtnNext=new z.flickBtn("next",m);z.flickBtnBack=new z.flickBtn("back",t);if(z.p.nowPage===0){z.flickBtnNext.addClass("pointer");z.flickBtnBack.addClass("btnFalse")}else{if(z.p.nowPage===(z.p.totalLength-1)){z.flickBtnNext.addClass("btnFalse");z.flickBtnBack.addClass("pointer")}else{z.flickBtnNext.addClass("pointer");z.flickBtnBack.addClass("pointer")}}c.append(z.flickBtnNext);c.append(z.flickBtnBack);z.flickBtnNext.bind("click",function(){z.p.autoChangeFlag=false;clearInterval(z.p.Timer);x=false;if(z.p.nowPage<(z.p.totalLength-1)){z.p.nowPage++;z.p.nowPosition=-(z.p.colWidth*z.p.nowPage);h(z.p.nowPosition);z.flickBtnBack.removeClass("btnFalse").addClass("pointer");if(z.p.nowPage==(z.p.totalLength-1)){z.flickBtnNext.removeClass("pointer").addClass("btnFalse")}if(typeof(g.flickLamp)!="undefined"&&typeof(z.flickLampCol[z.p.nowPage])!="undefined"){for(var f=0;f<z.p.totalLength;f++){z.flickLampCol[f].removeClass("lamp_cur")}z.flickLampCol[z.p.nowPage].addClass("lamp_cur")}}x=true;d();if(s){z.p.Timer=setInterval(j,n)}});z.flickBtnBack.bind("click",function(){z.p.autoChangeFlag=false;clearInterval(z.p.Timer);x=false;if(z.p.nowPage>0){z.p.nowPage--;z.p.nowPosition=-(z.p.colWidth*z.p.nowPage);h(z.p.nowPosition);z.flickBtnNext.removeClass("btnFalse").addClass("pointer");if(z.p.nowPage===0){z.flickBtnBack.removeClass("pointer").addClass("btnFalse")}if(typeof(g.flickLamp)!="undefined"&&typeof(z.flickLampCol[z.p.nowPage])!="undefined"){for(var f=0;f<z.p.totalLength;f++){z.flickLampCol[f].removeClass("lamp_cur")}z.flickLampCol[z.p.nowPage].addClass("lamp_cur")}}x=true;d();if(s){z.p.Timer=setInterval(j,n)}})}var k=navigator.userAgent;function v(B){if(B.type==="touchstart"){z.p.autoChangeFlag=false;z.p.touchPositionX=B.originalEvent.touches[0].clientX;z.p.touchPositionY=B.originalEvent.touches[0].clientY;clearInterval(z.p.Timer)}if(B.type==="touchmove"){z.p.positionIntX=z.p.touchPositionX-B.originalEvent.touches[0].clientX;z.p.positionIntY=z.p.touchPositionY-B.originalEvent.touches[0].clientY;$("#a").html(z.p.positionIntX);if(Math.abs(z.p.positionIntX)>5){B.preventDefault();z.p.flag=true;z.p.movePosition=z.p.nowPosition-z.p.positionIntX;q.css({webkitTransition:"none",webkitTransform:"translate3d("+z.p.movePosition+"px, 0, 0)"})}}if(B.type==="touchend"){if(z.p.flag){z.p.nowPosition=z.p.movePosition;if(typeof(g.flickBtn)!="undefined"){z.flickBtnNext.removeClass("btnFalse").addClass("pointer");z.flickBtnBack.removeClass("btnFalse").addClass("pointer")}if(z.p.positionIntX>50){if(z.p.nowPage<(z.p.totalLength-1)){z.p.nowPage++;z.p.nowPosition=-(z.p.colWidth*z.p.nowPage);h(z.p.nowPosition);if(typeof(g.flickBtn)!="undefined"&&z.p.nowPage==(z.p.totalLength-1)){z.flickBtnNext.removeClass("pointer").addClass("btnFalse")}}else{z.p.nowPosition=-(z.p.colWidth*(z.p.totalLength-1));h(z.p.nowPosition);if(typeof(g.flickBtn)!="undefined"&&z.p.nowPage==(z.p.totalLength-1)){z.flickBtnNext.removeClass("pointer").addClass("btnFalse")}}}else{if(z.p.positionIntX<-50){if(z.p.nowPage<=0){z.p.nowPage=0;z.p.nowPosition=0;h(z.p.nowPosition);if(typeof(g.flickBtn)!="undefined"){z.flickBtnBack.removeClass("pointer").addClass("btnFalse")}}else{z.p.nowPage--;z.p.nowPosition=-(z.p.colWidth*z.p.nowPage);h(z.p.nowPosition);if(typeof(g.flickBtn)!="undefined"&&z.p.nowPage===0){z.flickBtnBack.removeClass("pointer").addClass("btnFalse")}}}else{z.p.nowPosition=-(z.p.colWidth*z.p.nowPage);h(z.p.nowPosition)}}if(typeof(g.flickLamp)!="undefined"&&typeof(z.flickLampCol[z.p.nowPage])!="undefined"){for(var f=0;f<z.p.totalLength;f++){z.flickLampCol[f].removeClass("lamp_cur")}z.flickLampCol[z.p.nowPage].addClass("lamp_cur")}d();if(s){z.p.Timer=setInterval(j,n)}}z.p.flag=false}if(B.type==="touchcancel"){d();if(s){z.p.Timer=setInterval(j,n)}}}if(!k.match(/Android 1\.5/)||!k.match(/Android 1\.6/)){q.bind("touchstart touchmove touchend touchcancel",v)}if(s){z.p.Timer=setInterval(j,n)}window.addEventListener("load",r,true);(function(){var f=false;window.addEventListener("resize",function(){if(f!==false){clearTimeout(f)}f=setTimeout(function(){r()},200)},true)})()}})(jQuery);
